// Declaración de variables para almacenar los datos recibidos y la variable `y`
String receivedData = "";
int y = 0; // Variable `y` que se incrementará gradualmente

void setup() {
  // Inicializar la comunicación serial a 115200 baudios
  Serial.begin(115200);
  while (!Serial) {
    ; // Esperar a que se establezca la conexión
  }
  Serial.println("Iniciando comunicación serial...");
}

void loop() {
  // Comprobar si hay datos disponibles para leer
  if (Serial.available() > 0) {
    // Leer los datos entrantes en la variable 'receivedData'
    receivedData = Serial.readStringUntil('\n');
    
    // Imprimir los datos recibidos en el monitor serial
    Serial.print("Datos recibidos: ");
    Serial.println(receivedData);
  }

  // Enviar el comando G-code con la variable `y` incrementada
  enviarComandoGcode();

  // Esperar 5 segundos antes de enviar el siguiente comando
  delay(5000);
}

// Función para enviar el comando G-code y aumentar la variable `y`
void enviarComandoGcode() {
  // Construir el comando G-code con el valor actual de `y`
String comandoGcode = 
"
G28
G17
G0Z20.000
G0X0.000Y0.000S12000M3
G0X19.027Y59.779Z5.000
G1Z-0.005F60.0
G1Y46.570
G1Z-0.010
G1Y59.779
G0Z5.000
G0X31.522Y53.211
G1Z-0.005F60.0
G1X18.978
G1Z-0.010
G1X31.522
G0Z5.000
G0X34.062
G1Z-0.005F60.0
G1X36.602
G1Z-0.010
G1X34.062
G0Z5.000
G0X39.142
G1Z-0.005F60.0
G1X51.842
G1Z-0.010
G1X39.142
G0Z5.000
G0X51.123Y59.779
G1Z-0.005F60.0
G1Y46.582
G1Z-0.010
G1Y59.779
G0Z5.000
G0X54.382Y53.211
G1Z-0.005F60.0
G1X56.922
G1Z-0.010
G1X54.382
G0Z5.000
G0X59.462
G1Z-0.005F60.0
G1X72.162
G1Z-0.010
G1X59.462
G0Z5.000
G0X56.973Y59.779
G1Z-0.005F60.0
G1Y46.584
G1Z-0.010
G1Y59.779
G0Z5.000
G0X62.823
G1Z-0.005F60.0
G1Y46.587
G1Z-0.010
G1Y59.779
G0Z5.000
G0X74.702Y53.211
G1Z-0.005F60.0
G1X77.242
G1Z-0.010
G1X74.702
G0Z5.000
G0X79.782
G1Z-0.005F60.0
G1X92.326
G1Z-0.010
G1X79.782
G0Z5.000
G0X92.326Y46.598
G1Z-0.005F60.0
G1X19.027Y46.570
G1Z-0.010
G1X92.326Y46.598
G0Z5.000
G0Y59.779
G1Z-0.005F60.0
G1X18.973
G1Z-0.010
G1X92.326
G0Z5.000
G1Z-0.005F60.0
G1Y46.598
G1Z-0.010
G1Y59.779
G0Z5.000
G0Y79.598
G1Z-0.005F60.0
G1X19.017Y79.570
G1Z-0.010
G1X92.326Y79.598
G0Z5.000
G0Y86.166
G1Z-0.005F60.0
G1X19.027Y86.139
G1Z-0.010
G1X92.326Y86.166
G0Z5.000
G0Y92.735
G1Z-0.005F60.0
G1X19.012Y92.708
G1Z-0.010
G1X92.326Y92.735
G0Z5.000
G1Z-0.005F60.0
G1Y79.598
G1Z-0.010
G1Y92.735
G0Z5.000
G0Y112.598
G1Z-0.005F60.0
G1X19.007Y112.570
G1Z-0.010
G1X92.326Y112.598
G0Z5.000
G0Y119.166
G1Z-0.005F60.0
G1X19.027Y119.139
G1Z-0.010
G1X92.326Y119.166
G0Z5.000
G0Y125.735
G1Z-0.005F60.0
G1Y112.598
G1Z-0.010
G1Y125.735
G0Z5.000
G1Z-0.005F60.0
G1X19.002Y125.708
G1Z-0.010
G1X92.326Y125.735
G0Z5.000
G0Y145.598
G1Z-0.005F60.0
G1X18.997Y145.570
G1Z-0.010
G1X92.326Y145.598
G0Z5.000
G0X79.802Y152.211
G1Z-0.005F60.0
G1X92.326
G1Z-0.010
G1X79.802
G0Z5.000
G0X74.722
G1Z-0.005F60.0
G1X77.262
G1Z-0.010
G1X74.722
G0Z5.000
G0X62.823Y145.587
G1Z-0.005F60.0
G1Y158.735
G1Z-0.010
G1Y145.587
G0Z5.000
G0X59.482Y152.211
G1Z-0.005F60.0
G1X72.182
G1Z-0.010
G1X59.482
G0Z5.000
G0X56.973Y158.735
G1Z-0.005F60.0
G1Y145.584
G1Z-0.010
G1Y158.735
G0Z5.000
G0X54.402Y152.211
G1Z-0.005F60.0
G1X56.942
G1Z-0.010
G1X54.402
G0Z5.000
G0X51.123Y145.582
G1Z-0.005F60.0
G1Y158.735
G1Z-0.010
G1Y145.582
G0Z5.000
G0Y125.720
G1Z-0.005F60.0
G1Y112.582
G1Z-0.010
G1Y125.720
G0Z5.000
G0X62.823Y125.724
G1Z-0.005F60.0
G1Y112.587
G1Z-0.010
G1Y125.724
G0Z5.000
G0X56.973Y112.584
G1Z-0.005F60.0
G1Y125.722
G1Z-0.010
G1Y112.584
G0Z5.000
G0X62.823Y92.724
G1Z-0.005F60.0
G1Y79.587
G1Z-0.010
G1Y92.724
G0Z5.000
G0X55.669Y92.722
G1Z-0.005F60.0
G1X55.672Y79.584
G1Z-0.010
G1X55.669Y92.722
G0Z5.000
G0X51.123Y92.720
G1Z-0.005F60.0
G1Y79.582
G1Z-0.010
G1Y92.720
G0Z5.000
G0X19.027Y92.708
G1Z-0.005F60.0
G1Y79.570
G1Z-0.010
G1Y92.708
G0Z5.000
G0Y125.708
G1Z-0.005F60.0
G1Y112.570
G1Z-0.010
G1Y125.708
G0Z5.000
G0Y145.570
G1Z-0.005F60.0
G1Y158.735
G1Z-0.010
G1Y145.570
G0Z5.000
G0X31.542Y152.211
G1Z-0.005F60.0
G1X19.017
G1Z-0.010
G1X31.542
G0Z5.000
G0X34.082
G1Z-0.005F60.0
G1X36.622
G1Z-0.010
G1X34.082
G0Z5.000
G0X39.162
G1Z-0.005F60.0
G1X51.862
G1Z-0.010
G1X39.162
G0Z5.000
G0X19.027Y178.598
G1Z-0.005F60.0
G1Y191.708
G1Z-0.010
G1Y178.598
G0Z5.000
G0X31.529Y185.211
G1Z-0.005F60.0
G1X18.991
G1Z-0.010
G1X31.529
G0Z5.000
G0X34.069
G1Z-0.005F60.0
G1X36.609
G1Z-0.010
G1X34.069
G0Z5.000
G0X39.149
G1Z-0.005F60.0
G1X51.849
G1Z-0.010
G1X39.149
G0Z5.000
G0X51.123Y178.598
G1Z-0.005F60.0
G1Y191.708
G1Z-0.010
G1Y178.598
G0Z5.000
G0X54.389Y185.211
G1Z-0.005F60.0
G1X56.929
G1Z-0.010
G1X54.389
G0Z5.000
G0X59.469
G1Z-0.005F60.0
G1X72.169
G1Z-0.010
G1X59.469
G0Z5.000
G0X56.973Y178.598
G1Z-0.005F60.0
G1Y191.708
G1Z-0.010
G1Y178.598
G0Z5.000
G0X62.823Y178.598
G1Z-0.005F60.0
G1Y191.708
G1Z-0.010
G1Y178.598
G0Z5.000
G0X74.709Y185.211
G1Z-0.005F60.0
G1X77.249
G1Z-0.010
G1X74.709
G0Z5.000
G0X79.789
G1Z-0.005F60.0
G1X92.326
G1Z-0.010
G1X79.789
G0Z5.000
G0X92.326Y191.708
G1Z-0.005F60.0
G1X19.027Y191.708
G1Z-0.010
G1X92.326Y191.708
G0Z5.000
G0Y178.598
G1Z-0.005F60.0
G1X19.027Y178.598
G1Z-0.010
G1X92.326Y178.598
G0Z5.000
G1Z-0.005F60.0
G1Y191.708
G1Z-0.010
G1Y178.598
G0Z5.000
G0Y158.735
G1Z-0.005F60.0
G1X19.027Y158.735
G1Z-0.010
G1X92.326Y158.735
G0Z5.000
G1Z-0.005F60.0
G1Y145.598
G1Z-0.010
G1Y158.735
G0Z5.000
G0X137.664Y125.752
G1Z-0.005F60.0
G1X211.003Y125.779
G1Z-0.010
G1X137.664Y125.752
G0Z5.000
G1Z-0.005F60.0
G1X137.698Y112.615
G1Z-0.010
G1X137.664Y125.752
G0Z5.000
G0X137.681Y119.183
G1Z-0.005F60.0
G1X211.001Y119.211
G1Z-0.010
G1X137.681Y119.183
G0Z5.000
G0X137.698Y112.615
G1Z-0.005F60.0
G1X211.007Y112.642
G1Z-0.010
G1X137.698Y112.615
G0Z5.000
G0X165.942Y112.625
G1Z-0.005F60.0
G1Y125.763
G1Z-0.010
G1Y112.625
G0Z5.000
G0X171.973Y112.627
G1Z-0.005F60.0
G1Y125.765
G1Z-0.010
G1Y112.627
G0Z5.000
G0X178.004Y112.630
G1Z-0.005F60.0
G1Y125.767
G1Z-0.010
G1Y112.630
G0Z5.000
G0X171.973Y92.765
G1Z-0.005F60.0
G1Y79.627
G1Z-0.010
G1Y92.765
G0Z5.000
G0X178.004Y79.630
G1Z-0.005F60.0
G1Y92.767
G1Z-0.010
G1Y79.630
G0Z5.000
G0X165.942Y79.625
G1Z-0.005F60.0
G1Y92.763
G1Z-0.010
G1Y79.625
G0Z5.000
G0X148.373Y86.183
G1Z-0.005F60.0
G1X211.005Y86.211
G1Z-0.010
G1X148.373Y86.183
G0Z5.000
G0X137.664Y92.752
G1Z-0.005F60.0
G1X211.022Y92.779
G1Z-0.010
G1X137.664Y92.752
G0Z5.000
G0Y86.183
G1Z-0.005F60.0
G1X148.373
G1Z-0.010
G1X137.664
G0Z5.000
G0Y79.615
G1Z-0.005F60.0
G1X211.027Y79.642
G1Z-0.010
G1X137.664Y79.615
G0Z5.000
G1Z-0.005F60.0
G1Y92.752
G1Z-0.010
G1Y79.615
G0Z5.000
G0Y59.779
G1Z-0.005F60.0
G1Y46.615
G1Z-0.010
G1Y59.779
G0Z5.000
G0X150.196Y53.211
G1Z-0.005F60.0
G1X137.664
G1Z-0.010
G1X150.196
G0Z5.000
G0X152.736
G1Z-0.005F60.0
G1X155.276
G1Z-0.010
G1X152.736
G0Z5.000
G0X157.816
G1Z-0.005F60.0
G1X170.516
G1Z-0.010
G1X157.816
G0Z5.000
G0X165.942Y59.779
G1Z-0.005F60.0
G1Y46.625
G1Z-0.010
G1Y59.779
G0Z5.000
G0X171.973
G1Z-0.005F60.0
G1Y46.627
G1Z-0.010
G1Y59.779
G0Z5.000
G0X178.004
G1Z-0.005F60.0
G1Y46.630
G1Z-0.010
G1Y59.779
G0Z5.000
G0X173.056Y53.211
G1Z-0.005F60.0
G1X175.596
G1Z-0.010
G1X173.056
G0Z5.000
G0X178.136
G1Z-0.005F60.0
G1X190.836
G1Z-0.010
G1X178.136
G0Z5.000
G0X193.376
G1Z-0.005F60.0
G1X195.916
G1Z-0.010
G1X193.376
G0Z5.000
G0X198.456
G1Z-0.005F60.0
G1X210.988
G1Z-0.010
G1X198.456
G0Z5.000
G0X211.037Y46.642
G1Z-0.005F60.0
G1X137.664Y46.615
G1Z-0.010
G1X211.037Y46.642
G0Z5.000
G0X210.983Y59.779
G1Z-0.005F60.0
G1X211.011Y46.642
G1Z-0.010
G1X210.983Y59.779
G0Z5.000
G1Z-0.005F60.0
G1X210.973
G1Z-0.010
G1X210.983
G0Z5.000
G0X210.973
G1Z-0.005F60.0
G1X137.664
G1Z-0.010
G1X210.973
G0Z5.000
G0X211.006Y79.642
G1Z-0.005F60.0
G1X211.004Y92.779
G1Z-0.010
G1X211.006Y79.642
G0Z5.000
G0X211.013Y92.779
G1Z-0.005F60.0
G1X211.004Y92.779
G1Z-0.010
G1X211.013Y92.779
G0Z5.000
G0X211.002Y112.642
G1Z-0.005F60.0
G1X211.000Y125.779
G1Z-0.010
G1X211.002Y112.642
G0Z5.000
G0X211.000Y125.779
G1Z-0.005F60.0
G1X211.003
G1Z-0.010
G1X211.000
G0Z5.000
G0X210.997Y145.642
G1Z-0.005F60.0
G1X210.993
G1Z-0.010
G1X210.997
G0Z5.000
G1Z-0.005F60.0
G1X210.995Y158.779
G1Z-0.010
G1X210.997Y145.642
G0Z5.000
G0X210.995Y158.779
G1Z-0.005F60.0
G1X210.995Z-0.010
G0X210.995Z5.000
G0X198.458Y152.211
G1Z-0.005F60.0
G1X210.992
G1Z-0.010
G1X198.458
G0Z5.000
G0X193.378
G1Z-0.005F60.0
G1X195.918
G1Z-0.010
G1X193.378
G0Z5.000
G0X178.138
G1Z-0.005F60.0
G1X190.838
G1Z-0.010
G1X178.138
G0Z5.000
G0X173.058
G1Z-0.005F60.0
G1X175.598
G1Z-0.010
G1X173.058
G0Z5.000
G0X178.004Y145.630
G1Z-0.005F60.0
G1Y158.767
G1Z-0.010
G1Y145.630
G0Z5.000
G0X171.973Y145.627
G1Z-0.005F60.0
G1Y158.765
G1Z-0.010
G1Y145.627
G0Z5.000
G0X165.942Y145.625
G1Z-0.005F60.0
G1Y158.763
G1Z-0.010
G1Y145.625
G0Z5.000
G0X157.818Y152.211
G1Z-0.005F60.0
G1X170.518
G1Z-0.010
G1X157.818
G0Z5.000
G0X152.738
G1Z-0.005F60.0
G1X155.278
G1Z-0.010
G1X152.738
G0Z5.000
G0X137.664Y145.615
G1Z-0.005F60.0
G1X211.007Y145.642
G1Z-0.010
G1X137.664Y145.615
G0Z5.000
G1Z-0.005F60.0
G1Y158.752
G1Z-0.010
G1Y145.615
G0Z5.000
G0Y152.211
G1Z-0.005F60.0
G1X150.193
G1Z-0.010
G1X137.664
G0Z5.000
G0Y158.752
G1Z-0.005F60.0
G1X210.995Y158.779
G1Z-0.010
G1X137.664Y158.752
G0Z5.000
G0Y178.642
G1Z-0.005F60.0
G1Y191.792
G1Z-0.010
G1Y178.642
G0Z5.000
G1Z-0.005F60.0
G1X210.991
G1Z-0.010
G1X137.664
G0Z5.000
G0Y185.211
G1Z-0.005F60.0
G1X150.203
G1Z-0.010
G1X137.664
G0Z5.000
G0Y191.792
G1Z-0.005F60.0
G1X210.991Y191.779
G1Z-0.010
G1X137.664Y191.792
G0Z5.000
G0X152.743Y185.211
G1Z-0.005F60.0
G1X155.283
G1Z-0.010
G1X152.743
G0Z5.000
G0X157.823
G1Z-0.005F60.0
G1X170.523
G1Z-0.010
G1X157.823
G0Z5.000
G0X165.942Y178.642
G1Z-0.005F60.0
G1Y191.787
G1Z-0.010
G1Y178.642
G0Z5.000
G0X171.973
G1Z-0.005F60.0
G1Y191.786
G1Z-0.010
G1Y178.642
G0Z5.000
G0X178.004
G1Z-0.005F60.0
G1Y191.785
G1Z-0.010
G1Y178.642
G0Z5.000
G0X173.063Y185.211
G1Z-0.005F60.0
G1X175.603
G1Z-0.010
G1X173.063
G0Z5.000
G0X178.143
G1Z-0.005F60.0
G1X190.843
G1Z-0.010
G1X178.143
G0Z5.000
G0X193.383
G1Z-0.005F60.0
G1X195.923
G1Z-0.010
G1X193.383
G0Z5.000
G0X198.463
G1Z-0.005F60.0
G1X211.001
G1Z-0.010
G1X198.463
G0Z5.000
G0X210.992Y178.642
G1Z-0.005F60.0
G1X210.991Y191.779
G1Z-0.010
G1X210.992Y178.642
G0Z5.000
G0X210.991
G1Z-0.005F60.0
G1X210.992
G1Z-0.010
G1X210.991
G0Z5.000
G0X210.986Y191.779
G1Z-0.005F60.0
G1X210.991
G1Z-0.010
G1X210.986
G0Z5.000
G0X0.000Y0.000
M30
";
  
  // Enviar el comando G-code al puerto serial
  Serial.println(comandoGcode);

  // Incrementar la variable `y`

}